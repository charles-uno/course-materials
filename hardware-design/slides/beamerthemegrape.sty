\RequirePackage{tikz, xcolor, textpos}
\usetikzlibrary{shapes.geometric}
\definecolor{TextColor}{RGB}{0, 0, 0}
\definecolor{AccentColor}{RGB}{124, 98, 177}
\definecolor{PaperColor}{RGB}{255, 255, 255}

\setbeamerfont{title}{size=\LARGE, series=\bfseries}
\setbeamerfont{frametitle}{size=\large, series=\bfseries}
\setbeamerfont{block title}{series=\bfseries}
\setbeamerfont{normal text}{size=\large}

\usepackage{mathastext}
\usepackage{hyperref}
\usepackage{alltt}

\hypersetup{
    colorlinks=true,
    % internal links
    linkcolor=AccentColor,
    filecolor=AccentColor,      
    % external links
    urlcolor=AccentColor,
    }

\setbeamercolor{title}{fg=PaperColor}
\setbeamercolor{frametitle}{fg=PaperColor}
\setbeamercolor{author}{fg=TextColor}
\setbeamercolor{institute}{fg=TextColor}
\setbeamercolor{date}{fg=TextColor}
\setbeamercolor{normal text}{fg=TextColor}
\setbeamercolor{item}{fg=TextColor}
\setbeamercolor{section in toc}{fg=TextColor}
\setbeamercolor{section page}{fg=PaperColor}
\setbeamercolor{section title}{fg=PaperColor}
\setbeamercolor{section name}{fg=PaperColor}
\setbeamercolor{section in head/foot}{fg=TextColor}
\setbeamercolor{block title}{fg=TextColor}
\setbeamercolor{block title}{fg=TextColor}
\setbeamercolor{part title}{fg=red}
\setbeamercolor{subtitle}{fg=red}

\setbeamertemplate{items}[circle]

% omit navigation panel from the bottom of each slide
\setbeamertemplate{navigation symbols}{}

\newcommand{\Highlight}[1]{\textbf{\textcolor{AccentColor}{#1}}}

\newcommand{\Times}{\!\times\!}

\newcommand{\LogicNot}[1]{{\ensuremath{\overline{#1}}}}
\newcommand{\LogicAnd}[2]{{\ensuremath{{#1 \cdot #2}}}}
\newcommand{\LogicNand}[2]{\LogicNot{\LogicAnd{#1}{#2}}}
\newcommand{\LogicOr}[2]{{\ensuremath{{#1 \lor #2}}}}
\newcommand{\LogicNor}[2]{\LogicNot{\LogicOr{#1}{#2}}}
\newcommand{\LogicXor}[2]{{\ensuremath{{#1 \oplus #2}}}}
\newcommand{\LogicXnor}[2]{\LogicNot{\LogicXor{#1}{#2}}}

% default slide background
\setbeamertemplate{background}{
\begin{tikzpicture}[remember picture,overlay,shift=(current page.north west)]
    \begin{scope}[x={(current page.north east)},y={(current page.south west)}]
    \draw[draw=AccentColor, fill=AccentColor] (0, 0) rectangle (1, 0.1);
\end{scope}
\end{tikzpicture}
}

% title page background and layout
\setbeamertemplate{title page}{
\begin{tikzpicture}[remember picture,overlay,shift=(current page.north west)]
\begin{scope}[x={(current page.north east)},y={(current page.south west)}]
\draw[draw=AccentColor, fill=AccentColor] (0, 0) rectangle (1, 0.5);
\draw[draw=PaperColor, fill=PaperColor] (0, 0.5) rectangle (1, 1);
\node at (0.5, 0.4) {\usebeamertemplate{title}};
\node at (0.5, 0.6) {\usebeamerfont{institute}\insertinstitute \;\; \textbullet \;\; \usebeamerfont{author}\insertauthor};
\node at (0.5, 0.9) {\usebeamertemplate{date}};
\end{scope}
\end{tikzpicture}
}

% section page
\newcommand{\Section}[1]{
\section{#1}
\begin{frame}{#1}
% do not use \sectionpage because it makes the section name into a link and the color gets lost
\begin{tikzpicture}[remember picture,overlay,shift=(current page.north west)]
    \begin{scope}[x={(current page.north east)},y={(current page.south west)}]
    \draw[draw=PaperColor, fill=PaperColor] (0, 0) rectangle (1, 1);
    \draw[draw=AccentColor, fill=AccentColor] (0.1, 0) rectangle (0.9, 1);
    \node at (0.5, 0.5) {\textcolor{PaperColor}{#1}};
    \end{scope}
    \end{tikzpicture}
\end{frame}

\begin{frame}{Outline}

    \begin{multicols*}{2}
        \tableofcontents[currentsection,sectionstyle=hide,subsectionstyle=show/show/hide]
	\end{multicols*}
\end{frame}
}

% subsection
\newcommand{\Subsection}[1]{
\subsection{#1}
\begin{frame}
\begin{tikzpicture}[remember picture,overlay,shift=(current page.north west)]
\begin{scope}[x={(current page.north east)},y={(current page.south west)}]
\draw[draw=PaperColor, fill=PaperColor] (0, 0) rectangle (1, 1);
\draw[draw=AccentColor, fill=AccentColor] (0, 0.3) rectangle (1, 0.7);
\node at (0.5, 0.5) {\textcolor{PaperColor}{#1}};
\end{scope}
\end{tikzpicture}
\end{frame}
}



